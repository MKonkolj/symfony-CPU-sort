{% extends "base.html.twig" %}

{% block title %}Products{% endblock %}

{% block body %}
    <div class="container mt-5">
        <select class="form-select w-25 d-inline" name="filter" id="filter">
            <option value="price_asc">Ascening</option>
            <option value="price_dsc">Descending</option>
            <option value="price_range">Price range</option>
            <option value="wild_wild_west">Neki wild filter</option>
        </select>
        <button class="btn btn-dark"><a href="{{ path("product-add") }}">Add</a></button>
        {{ dump(products) }}
        {% if products | length %}
            <table class="table table-dark table-hover text-center mt-1 shadow rounded overflow-hidden">
            <thead>
                <tr>
                    <th>ID<th>
                    <th>Name<th>
                    <th>Price<th>
                    <th>Team<th>
                    <th>Platform<th>
                    <th>Slug<th>
                    <th colspan="2">Options</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                    <tr>
                        <td>{{ product.id }}<td>
                        <td>{{ product.name }}<td>
                        <td>{{ product.price }}<td>
                        <td>{{ product.team }}<td>
                        <td>{{ product.platform }}<td>
                        <td>{{ product.slug }}<td>
                        <td><a href="{{ path("product-edit", {'id':product.getId()}) }}">Edit</a></td>
                        <td><a href="{{ path("product-delete", {'id':product.getId()}) }}">Delete</a></td>
                    </tr>
                {% endfor %}
            </tbody>
            </table>
        {% else %}
            <h4 class="text-center">No products!</h4>
        {% endif %}
    </div>
{% endblock %}

{% block script %}
    {# let filter = document.getElementById("filter");

    filter.addEventListener("change", function() {
        let value
        $.get(" {{ path("product-filter") }} ", {})
    }) #}
{% endblock %}